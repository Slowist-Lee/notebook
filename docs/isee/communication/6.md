# Analog - Digital Conversion

> [!NOTE] 核心概念
> 本章我们将学习如何将现实世界中的**模拟信号**（连续的）转换为数字世界中的**数字信号**（离散的），以及如何再转换回来。这是所有现代数字通信和处理技术的基础。



## 1. 模拟信号与数字信号 (Analog vs. Digital)

首先，我们需要理解两种信号的基本区别。

[请在此处插入第2页的图片]

*   **模拟信号 (Analog Signal)**:
    *   幅值（信号的强度）是**连续**变化的。
    *   就像我们说话的声音、自然界中的光线，它们在任何时间点都有一个精确的值。

*   **数字信号 (Digital Signal)**:
    *   幅值是**离散**的，通常用一串二进制数（如 `1110101...`）来表示。
    *   它只有有限个可能的取值。

> [!QUESTION] 为什么要使用数字信号？
> *   **易于再生 (easier to be regenerated)**: 数字信号（0和1）在传输过程中即使受到干扰，也很容易恢复成原始的、清晰的信号。而模拟信号的噪声会累积，越来越失真。
> *   **理论完备 (complete theory)**: 数字信号处理和信息论有坚实的数学理论基础。
> *   **硬件实现灵活，存储高效 (flexible hardware implementation and efficient storage)**: 数字电路（如计算机）易于设计和集成，并且数字信息（如MP3、JPG文件）可以被高效地压缩和存储。

---

## 2. 数字通信系统概览

下图展示了一个典型的数字通信系统流程。我们的焦点是红圈圈出的部分：**A-D转换**和**D-A转换**。

[请在此处插入第3页的图片]

*   **发送端 (Source -> A-D Conversion)**:
    1.  **信源 (Source)** 产生原始的模拟信号（比如麦克风录下的声音）。
    2.  **A-D转换 (A-D Conversion)** 将这个模拟信号转换成一串二进制比特流（bit sequence）。
    3.  之后，信号经过调制、通过信道传输。

*   **接收端 (-> D-A Conversion -> User)**:
    1.  信号经过解调后，得到二进制比特流。
    2.  **D-A转换 (D-A Conversion)** 将这串比特流恢复成模拟信号。
    3.  **用户 (User)** 最终接收到这个恢复后的模拟信号（比如从扬声器听到声音）。

---

## 3. A-D 转换 (Analog-to-Digital Conversion)

A-D转换是连接模拟世界和数字世界的桥梁。它主要包含两个核心步骤：**采样 (Sampling)** 和 **量化 (Quantization)**。

[请在此处插入第4页的图片]

1.  **采样 (Sampling)**
    *   **定义**: 将一个**时间上连续**的模拟信号，转换成一个**时间上离散**的信号。
    *   **通俗理解**: 在时间轴上，每隔一小段时间（采样周期）就“看”一下模拟信号的幅值是多少，并记录下来。就像用一连串快照来记录一个连续的动作。

2.  **量化 (Quantization)**
    *   **定义**: 将一个**时间上离散**的信号（幅值仍然是连续的），转换成一串二进制比特。
    *   **通俗理解**: 我们不可能无限精确地记录采样得到的幅值。量化就是把这些幅值“四舍五入”到一些预先规定好的、有限的等级上，并给每个等级分配一个独一无二的二进制代码。

---
(此部分省略了3.1到3.4的详细理论内容，以节约篇幅，完整内容请参考上一条回答)
...
...
---

## 4. A-D 转换综合应用与例题

在学习了采样和量化的理论之后，让我们通过一个综合性的例题，将这些知识点与实际的通信系统问题结合起来。

> [!EXAMPLE] 综合例题：音频信号的数字化与传输
>
> **问题描述**:
> 一个频率范围在 0 到 6kHz 的音频信号需要被数字化。该信号的采样频率为 15kHz，然后使用 150kbits/s 的数据率进行均匀量化。
>
> (1) 假设使用二进制PAM（脉冲幅度调制）的基带数字通信系统传输该信号，确定二进制PAM信号功率谱的第一个过零点。
>
> (2) 信号在一个带宽为 15kHz 的AWGN（加性高斯白噪声）信道中传输，确定所需的信噪比SNR（以dB为单位）。（提示：香农容量公式）
>
> (3) 该模拟信号的动态范围为 [-1, 1]，平均功率为 1/2，确定其信噪比SQNR。（提示：SQNR取决于量化误差和平均信号功率）
>
> (4) 若直接使用 AM-SSB（单边带调幅）传输该模拟信号，要达到与(3)中相同的输出信噪比，确定AM-SSB解调器所需的输入信噪比。（提示：SNR G(AM-SSB)=1）
>
> ---
>
> **解答**:
>
> #### (1) 求解二进制PAM功率谱的第一个过零点
>
> **思路**: 基带二进制PAM信号的功率谱形状主要由码元速率（或比特率）决定。对于不归零（NRZ）编码，功率谱密度函数（PSD）的主瓣宽度由比特率 $R_b$ 决定。其第一个过零点恰好出现在比特率 $R_b$ 的频率处。
>
> *   **已知**: 数字信号的比特率 $R_b = 150 \text{ kbits/s} = 150,000 \text{ Hz}$
> *   **计算**: 功率谱的第一个过零点频率 $f_0 = R_b = 150 \text{ kHz}$
>
> > [!SUCCESS] 答案 (1)
> > 二进制PAM信号功率谱的第一个过零点是 **150 kHz**。
>
> ---
>
> #### (2) 求解所需信道SNR
>
> **思路**: 根据香农信道容量定理，信道能无差错传输的最大信息速率（信道容量C）由信道带宽 $B_T$ 和信噪比 SNR 决定。为了成功传输信号，信道容量必须至少等于信号的数据率 $R_b$。
>
> *   **香农公式**: $C = B_T \log_2(1 + \text{SNR})$
> *   **已知**: $R_b = 150 \text{ kbits/s}$， $B_T = 15 \text{ kHz}$
> *   **计算**:
>     *   令 $C = R_b$: $150,000 = 15,000 \times \log_2(1 + \text{SNR})$
>     *   $10 = \log_2(1 + \text{SNR}) \implies 1 + \text{SNR} = 2^{10} = 1024 \implies \text{SNR} = 1023$
>     *   $\text{SNR}_{\text{dB}} = 10 \log_{10}(1023) \approx 30.1 \text{ dB}$
>
> > [!SUCCESS] 答案 (2)
> > 理论上所需的信道信噪比为 **1023**，约等于 **30.1 dB**。
>
> ---
>
> #### (3) 求解量化信噪比 (SQNR)
>
> **思路**: SQNR 是信号功率与量化噪声功率的比值。我们需要先根据总比特率和采样率求出每个样本的比特数 $b$，然后计算量化噪声功率。
>
> *   **计算每样本比特数 $b$**: $b = \frac{\text{总比特率 } R_b}{\text{采样率 } f_s} = \frac{150,000}{15,000} = 10 \text{ bits/sample}$
> *   **计算量化噪声功率 $\sigma_e^2$**:
>     *   动态范围 $V_{pp} = 1 - (-1) = 2$
>     *   量化电平数 $L = 2^b = 2^{10} = 1024$
>     *   $\sigma_e^2 = \frac{\Delta^2}{12} = \frac{(V_{pp}/L)^2}{12} = \frac{(2/1024)^2}{12} = \frac{1}{3 \times 1024^2}$
> *   **计算SQNR**:
>     *   信号功率 $P_x = 1/2$ (已知)
>     *   $\text{SQNR} = \frac{P_x}{\sigma_e^2} = \frac{1/2}{1 / (3 \times 1024^2)} = 1.5 \times 1024^2 \approx 1,572,864$
>     *   $\text{SQNR}_{\text{dB}} = 10 \log_{10}(1.5 \times 1024^2) \approx 61.96 \text{ dB}$
>
> > [!SUCCESS] 答案 (3)
> > 信号的量化信噪比SQNR约等于 **61.96 dB**。
>
> ---
>
> #### (4) 求解AM-SSB所需的输入SNR
>
> **思路**: 系统的输出信噪比 $SNR_{out}$ 等于输入信噪比 $SNR_{in}$ 乘以系统的信噪比增益 $G$。
>
> *   **公式**: $SNR_{out} = G \times SNR_{in}$
> *   **已知**: $SNR_{out} = \text{SQNR} \approx 61.96 \text{ dB}$，$G(\text{AM-SSB}) = 1$ (即 0 dB)
> *   **计算**: $SNR_{in} = SNR_{out} / G$。在dB域中，这是减法：
>     *   $SNR_{in, \text{dB}} = SNR_{out, \text{dB}} - G_{\text{dB}} = 61.96 - 0 = 61.96 \text{ dB}$
>
> > [!SUCCESS] 答案 (4)
> > AM-SSB解调器所需的输入信噪比约等于 **61.96 dB**。

---




---

## 5. A-D 与 D-A 总结

[请在此处插入第28页的图片]

### A-D 转换流程 (回顾)
1.  **采样 (Sampling)**: 将连续时间信号变为离散时间信号。
2.  **量化 (Quantization)**: 将连续幅值信号变为离散幅值信号，并分配二进制码。

### D-A 转换流程 (Digital-to-Analog Conversion)
这是A-D的逆过程，将数字比特流恢复为模拟信号。

1.  **解码 (Decoding)**: 将输入的二进制码（如 `0001101110...`）转换回对应的量化电平值（如 `0.1, -0.3, 0.2 ...`）。
2.  **脉冲生成 (Generate a pulse)**: 为每个解码出的电平值，生成一个持续时间为 $T_s$ 的平顶脉冲。这样就形成了一个阶梯状的波形。
3.  **低通滤波 (Lowpass filtering)**: 这个阶梯波形通过一个低通滤波器，滤除高频谐波成分，使其变得平滑，从而近似恢复出原始的模拟信号。

