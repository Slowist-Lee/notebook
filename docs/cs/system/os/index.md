# mit6.s081 操作系统

- 课程教材： [blog.betteryuan.top/archives/xv6-riscv-book-zh-cn](https://blog.betteryuan.top/archives/xv6-riscv-book-zh-cn)
- 课程内容： [简介 | MIT6.S081](https://mit-public-courses-cn-translatio.gitbook.io/mit6-s081/)
- lab讲解：[https://www.bilibili.com/video/BV1ou41127p9/](https://www.bilibili.com/video/BV1ou41127p9/)

## Schedule

主要还是参考：[6.S081 / Fall 2021](https://pdos.csail.mit.edu/6.828/2021/schedule.html)

| 单元 (Unit) | 主题与内容 (Topic & Content)                                                  | 预习要求 (Preparation)                                                                                                                        | 作业与实验 (Assignments)                                 |
| :-------- | :----------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------- |
| **课程 1**  | **主题**: 介绍与示例<br>**资料**: xv6 book, 2020: 笔记, 视频                          | 阅读第1章 (Unix)                                                                                                                              | **作业 1**: 问题<br>**实验**: Lab util: Unix utilities    |
| **课程 2**  | **主题**: C 语言和 gdb (助教)                                                   | K&R 教材: 2.9节 (位运算符), 5.1-5.6节 (指针和地址/指针数组), 6.4节 (指向结构的指针)                                                                                |                                                     |
| **课程 3**  | **主题**: 操作系统组织和系统调用<br>**资料**: 2020: 笔记, 板书, 视频                          | 阅读第2章和xv6代码: kernel/proc.h, kernel/proc.c, kernel/entry.S, kernel/main.c, user/initcode.S, user/init.c, 并浏览 kernel/proc.c 和 kernel/exec.c | **作业 2**: 问题<br>**实验**: Lab syscall: 系统调用           |
| **截止**    | **Lab util 实验截止**                                                        |                                                                                                                                           |                                                     |
| **课程 4**  | **主题**: 页表 (Page tables)<br>**资料**: 2020: 笔记, 板书, 视频                     | 阅读第3章和 kernel/memlayout.h, kernel/vm.c, kernel/kalloc.c, kernel/riscv.h, kernel/exec.c                                                    | **作业 3**: 问题                                        |
| **课程 5**  | **主题**: GDB, RISC-V的调用约定和栈帧 (助教)<br>**资料**: 2020: 笔记, 视频                 | 预习: Calling Convention                                                                                                                    | **作业 4**: 问题<br>**实验**: Lab pgtbl: 页表               |
| **课程 6**  | **主题**: 隔离与系统调用入口/出口<br>**资料**: 2020: 笔记, 视频                             | 阅读第4章, 除了4.6节, 以及 kernel/riscv.h, kernel/trampoline.S, kernel/trap.c                                                                      | **作业 5**: 问题                                        |
| **截止**    | **Lab syscall 实验截止**                                                     |                                                                                                                                           |                                                     |
| **课程 7**  | **主题**: 页错误 (Page faults)<br>**资料**: 2020: 笔记, 板书, 视频                    | 阅读第4.6节                                                                                                                                   | **作业 6**: 问题<br>**实验**: Lab traps: 陷阱               |
| **截止**    | **Lab pgtbl 实验截止**                                                       |                                                                                                                                           |                                                     |
| **课程 8**  | **主题**: 中断 (Interrupts)<br>**资料**: 2020: 笔记, 板书, 视频                      | 阅读第5章和 kernel/kernelvec.S, kernel/plic.c, kernel/console.c, kernel/uart.c, kernel/printf.c                                                | **作业 7**: 问题<br>**实验**: Lab cow: Copy-on-write fork |
| **截止**    | **Lab traps 实验截止**                                                       |                                                                                                                                           |                                                     |
| **课程 9**  | **主题**: 问答与实验 (Q&A/labs)                                                 |                                                                                                                                           | **作业 8**: 问题                                        |
| **课程 10** | **主题**: 多处理器和锁 (Multiprocessors and locking)<br>**资料**: 2020: 笔记, 板书, 视频 | 阅读 "Locking" 相关内容以及 kernel/spinlock.h 和 kernel/spinlock.c                                                                                 | **作业 9**: 问题                                        |
| **课程 11** | **主题**: 调度 1 (Scheduling 1)<br>**资料**: 2020: 笔记, 视频                      | 阅读 "Scheduling" 相关内容, 至7.4节, 以及 kernel/proc.c, kernel/swtch.S                                                                             | **作业 10**: 问题                                       |
| **截止**    | **Lab cow 实验截止**                                                         |                                                                                                                                           |                                                     |
| **课程 12** | **主题**: 调度 2 (Scheduling 2)<br>**资料**: 2020: 笔记, 代码, 视频                  | 阅读 "Scheduling" 的剩余部分和相应代码: kernel/proc.c, kernel/sleeplock.c                                                                             | **作业 11**: 问题<br>**实验**: Lab thread: 多线程            |
| **课程 13** | **主题**: 问答与实验 (Q&A/labs)                                                 |                                                                                                                                           | **作业 12**: 问题                                       |
| **截止**    | **Lab thread 实验截止**                                                      |                                                                                                                                           |                                                     |
| **课程 14** | **主题**: 文件系统 (File systems)<br>**资料**: 2020: 笔记, 板书, 视频                  | 阅读 kernel/bio.c, kernel/fs.c, kernel/sysfile.c, kernel/file.c 和 "File system" (除了 logging 部分)                                             | **作业 13**: 问题<br>**实验**: Lab net: 网络驱动              |
| **课程 15** | **主题**: 崩溃恢复 (Crash recovery)<br>**资料**: 2020: 笔记, 板书, 视频                | 阅读 kernel/log.c 和 "File system" 的 logging 部分 (1991)                                                                                       | **作业 14**: 问题                                       |
| **课程 16** | **主题**: 文件系统性能和快速崩溃恢复<br>**资料**: 2020: 笔记, 视频                            | 预习: Journaling the Linux ext2fs Filesystem (1998)                                                                                         | **作业 15**: 问题                                       |
| **截止**    | **Lab net 实验截止**                                                         |                                                                                                                                           |                                                     |
| **课程 17** | **主题**: 用户应用的虚拟内存<br>**资料**: 2020: 笔记, 板书, 视频                            | 预习: Virtual Memory Primitives for User Programs (1991)                                                                                    | **作业 16**: 问题                                       |
| **课程 18** | **主题**: 操作系统组织 (OS Organization)<br>**资料**: 2020: 笔记, 视频                 | 预习: The Performance of micro-Kernel-Based Systems (1997)                                                                                  | **作业 17**: 问题<br>**实验**: Lab lock: 并行/锁             |
| **截止**    | **退课截止 (DROP DATE)**<br>**Lab lock 实验截止**                                |                                                                                                                                           |                                                     |
| **课程 19** | **主题**: 虚拟机 (Virtual Machines)<br>**资料**: 2020: 笔记, 视频                   | 预习: Dune: Safe User-level Access to Privileged CPU Features (2012)                                                                        | **作业 18**: 问题                                       |
| **课程 20** | **主题**: 内核和高级语言 (Kernels and HLL)<br>**资料**: 2020: 笔记, 幻灯片, 视频           | 预习: 阅读 the Biscuit paper (2018), FAQ                                                                                                      | **作业 19**: 问题<br>**实验**: Lab fs: 文件系统               |
| **课程 21** | **主题**: 网络 (Networking)<br>**资料**: 2020: 笔记, 视频                          | 预习: Receive Livelock (1996)                                                                                                               | **作业 20**: 问题                                       |
| **其他**    | Hacking day: 无课, 可在 lab 上工作                                              |                                                                                                                                           | **实验**: Lab mmap: Mmap                              |
| **截止**    | **Lab fs 实验截止**                                                          |                                                                                                                                           |                                                     |
| **课程 22** | **主题**: Meltdown<br>**资料**: 2020: 笔记, 视频                                 | 预习: 阅读 Meltdown (2018)                                                                                                                    | **作业 21**: 问题                                       |
| **截止**    | **Lab mmap 实验截止**                                                        |                                                                                                                                           |                                                     |
| **课程 23** | **主题**: 多核可扩展性和 RCU<br>**资料**: 2020: 笔记, 视频                              | 预习: 阅读 RCU paper (2013), FAQ                                                                                                              | **作业 22**: 问题                                       |
| **课程 24** | **主题**: 当前研究: 辐射耐受性 (助教)<br>**资料**: NASA CALIPSO paper (2006) 作为背景       |                                                                                                                                           | **作业 23**: 问题                                       |
| **课程 25** | **主题**: 问答 (Q&A)                                                         |                                                                                                                                           |                                                     |

